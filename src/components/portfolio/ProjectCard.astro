---
import FadeIn from "../animations/FadeIn";

type Project = {
  slug: string;
  title: string;
  shortDescription: string;
  featuredImage: string;
  category: string;
  technologies?: string[];
};

const { project } = Astro.props as { project: Project };
---

<a href={`/portfolio/${project.slug}`} class="group block h-full">
  <article
    class="h-full flex flex-col rounded-2xl border border-gray-200 bg-white/80 backdrop-blur shadow-sm overflow-hidden transition
             hover:-translate-y-1 hover:shadow-xl hover:border-gray-300"
  >
    <!-- Image -->
    <div
      class="relative h-56 md:h-60 flex items-center justify-center overflow-hidden bg-gradient-to-br from-primary/10 to-accent/10"
    >
      <div
        class="h-32 w-32 md:h-36 md:w-36 lg:h-48 lg:w-48 rounded-full overflow-hidden bg-white shadow-sm ring-1 ring-black/5 flex items-center justify-center"
      >
        <img
          src={project.featuredImage}
          alt={project.title}
          class="h-full w-full object-cover transition-transform duration-700 group-hover:scale-105"
          loading="lazy"
        />
      </div>

      <div class="absolute top-4 left-4">
        <span
          class="inline-flex items-center gap-2 rounded-full bg-white/90 text-gray-900 px-3 py-1 text-xs font-semibold border border-white/60 shadow-sm"
        >
          <span class="h-2 w-2 rounded-full bg-primary"></span>
          {project.category}
        </span>
      </div>
    </div>

    <!-- Content -->
    <div class="p-6 flex flex-col flex-1">
      <h3
        class="text-lg md:text-[19px] font-heading font-bold leading-snug mb-2 text-gray-900 group-hover:text-primary transition-colors"
      >
        {project.title}
      </h3>

      <!-- Fixed height description -->
      <p class="text-gray-600 leading-relaxed line-clamp-3 min-h-[72px] mb-4">
        {project.shortDescription}
      </p>

      <!-- Tech tags pushed to bottom -->
      <div class="flex flex-wrap gap-2 mt-auto">
        {
          project.technologies
            ?.slice(0, 3)
            .map((tech: string) => (
              <span class="rounded-lg border border-gray-200 bg-white px-2.5 py-1 text-xs font-semibold text-gray-700">
                {tech}
              </span>
            ))
        }
      </div>
    </div>
  </article>
</a>
