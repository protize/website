---
import FadeIn from "../animations/FadeIn";

type Action = {
  label: string;
  href: string;
  variant?: "primary" | "outline";
  icon?: boolean;
};

type Props = {
  title?: string;
  subtitle?: string;
  actions?: Action[];
  theme?: "light" | "dark";
  gradientFrom?: string;
  gradientTo?: string;
  showPattern?: boolean;
  showBlobs?: boolean;
  className?: string;
};

const {
  title = "Ready to Transform Your Business?",
  subtitle = "Let's discuss how our IT solutions can help you achieve your business goals. Get started with a free consultation today.",
  actions = [
    {
      label: "Schedule a Consultation",
      href: "/contact-us",
      variant: "primary",
      icon: true,
    },
    { label: "View Our Work", href: "/portfolio", variant: "outline" },
  ],
  theme = "light",
  gradientFrom = "from-primary/30",
  gradientTo = "to-accent/30",
  showPattern = true,
  showBlobs = true,
  className = "",
} = Astro.props as Props;

const textClass = theme === "dark" ? "text-white" : "text-black";
const subTextClass = theme === "dark" ? "text-white/70" : "text-black/70";

// Button styles
const primaryBtn =
  theme === "dark"
    ? "bg-white text-primary hover:bg-gray-100"
    : "bg-white text-primary hover:bg-gray-100";

const outlineBtn =
  theme === "dark"
    ? "bg-transparent border-2 border-white text-white hover:bg-white hover:text-primary"
    : "bg-transparent border-2 border-white text-primary hover:bg-white hover:text-primary";
---

<section
  class={`section-padding relative overflow-hidden bg-gradient-to-br ${gradientFrom} ${gradientTo} ${textClass} ${className}`}
>
  {
    showPattern && (
      <div class="absolute inset-0 opacity-10 pointer-events-none">
        <div
          class="absolute inset-0"
          style="background-image: radial-gradient(circle, white 1px, transparent 1px); background-size: 50px 50px;"
        />
      </div>
    )
  }

  {
    showBlobs && (
      <>
        <div class="absolute top-0 right-0 w-96 h-96 bg-white/10 rounded-full blur-3xl pointer-events-none" />
        <div class="absolute bottom-0 left-0 w-96 h-96 bg-white/10 rounded-full blur-3xl pointer-events-none" />
      </>
    )
  }

  <div class="container-custom relative z-10">
    <div class="max-w-4xl mx-auto text-center">
      <FadeIn client:load direction="up">
        <h2 class="text-4xl md:text-5xl font-heading font-bold mb-6">
          {title}
        </h2>

        <p class={`text-xl mb-12 leading-relaxed ${subTextClass}`}>
          {subtitle}
        </p>

        <div
          class="flex flex-col sm:flex-row gap-4 justify-center items-center"
        >
          {
            actions.map((a) => (
              <a
                href={a.href}
                class={`px-8 py-4 rounded-lg font-semibold transition-all duration-300 inline-flex items-center
                ${a.variant === "outline" ? outlineBtn : primaryBtn}
                ${a.variant === "primary" ? "hover:shadow-2xl hover:scale-105" : ""}`}
              >
                {a.label}
                {a.icon && (
                  <svg
                    class="w-5 h-5 ml-2"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M13 7l5 5m0 0l-5 5m5-5H6"
                    />
                  </svg>
                )}
              </a>
            ))
          }
        </div>
      </FadeIn>
    </div>
  </div>
</section>
