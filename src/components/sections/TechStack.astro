---
import Carousel from "../shared/Carousel.astro";
import { logos } from "../../data/logos";
import Title from "../shared/Title.astro";

interface SkillItem {
  icon: string; // inline SVG
  title: string;
  description: string;
}

interface Props {
  title?: string;
  skills: SkillItem[];
}

const { title, skills } = Astro.props as Props;
---

<section id="tools-carousel-section" class="w-full pt-16 my-10">
  <div class="mx-auto max-w-6xl">
    <div class="text-center reveal-title">
      {title && <Title>{title}</Title>}
    </div>

    <div class="mt-10 reveal-carousel">
      <Carousel tools={logos} />
    </div>
  </div>
</section>

<script>
  const section = document.getElementById("tools-carousel-section");

  if (section) {
    const prefersReducedMotion = window.matchMedia(
      "(prefers-reduced-motion: reduce)",
    ).matches;

    if (prefersReducedMotion) {
      section.classList.add("is-visible");
    } else {
      const observer = new IntersectionObserver(
        ([entry], obs) => {
          if (entry.isIntersecting) {
            section.classList.add("is-visible");
            obs.disconnect();
          }
        },
        { threshold: 0.2, rootMargin: "0px 0px -8% 0px" },
      );

      observer.observe(section);
    }
  }
</script>

<style>
  #tools-carousel-section .reveal-title,
  #tools-carousel-section .reveal-carousel {
    opacity: 0;
    transform: translateY(18px);
    will-change: transform, opacity;
  }

  #tools-carousel-section.is-visible .reveal-title {
    animation: fadeUp 0.6s cubic-bezier(0.22, 1, 0.36, 1) forwards;
  }

  #tools-carousel-section.is-visible .reveal-carousel {
    animation: fadeUp 0.75s cubic-bezier(0.22, 1, 0.36, 1) 0.15s forwards;
  }

  @keyframes fadeUp {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @media (prefers-reduced-motion: reduce) {
    #tools-carousel-section .reveal-title,
    #tools-carousel-section .reveal-carousel {
      opacity: 1 !important;
      transform: none !important;
      animation: none !important;
    }
  }
</style>
