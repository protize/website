---
import type { ImageMetadata } from "astro";
import Container from "../../shared/Container.astro";
import TeamGridGlowing from "./TeamGridGlowing";

export type SocialLink = {
  label: "facebook" | "twitter" | "instagram" | "linkedin" | "github" | string;
  href: string;
};

export type TeamMember = {
  id?: string | number;
  name: string;
  role?: string;
  bio?: string;
  image: string | ImageMetadata;
  socials?: SocialLink[];
};

export interface Props {
  title?: string;
  subtitle?: string;
  description?: string;
  members: TeamMember[];
  className?: string;
}

const {
  title = "Our Creative Team",
  subtitle = "Our Team Members",
  description = "We are a multidisciplinary crew crafting products and delightful experiences.",
  members = [],
  className = "",
} = Astro.props;

// ImageMetadata|string -> string URL
const normalizedMembers = (members ?? []).map((m) => ({
  ...m,
  image: typeof m.image === "string" ? m.image : (m.image?.src ?? ""),
}));
---

<section class={`relative py-16 ${className}`}>
  <Container>
    <div class="mx-auto mb-4 max-w-2xl text-center">
      <p
        class="mb-2 text-sm font-semibold tracking-wide text-primary uppercase"
      >
        {subtitle}
      </p>
      <h2
        class="mb-3 text-3xl font-bold leading-tight text-gray-900 sm:text-4xl md:text-5xl"
      >
        {title}
      </h2>
      {
        description && (
          <p class="mx-auto max-w-3xl text-base text-gray-600">{description}</p>
        )
      }
    </div>

    <div class="lw-scope">
      <TeamGridGlowing members={normalizedMembers} client:visible />
    </div>
  </Container>
</section>
