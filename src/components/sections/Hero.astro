---
import { Image } from "astro:assets";
import Container from "../shared/Container.astro";
import Paragraph from "../shared/Paragraph.astro";

import CtaButton from "../shared/CtaButton.astro";
import GradiantText from "../shared/GradiantText.astro";
import CounterSection from "./CounterSection.tsx";

export interface Props {
  className?: string;
}

const { className = "" } = Astro.props;
---

<section class={`relative overflow-hidden ${className}`}>
  <Container
    className="relative my-20 flex flex-col lg:flex-row items-center lg:items-start gap-10 lg:gap-12"
  >
    <div
      class="hero-content relative z-10 flex flex-col items-center text-center lg:text-left lg:py-7 xl:py-8
      lg:items-start lg:max-w-4xl max-w-3xl mx-auto lg:mx-0 lg:w-1/2 space-y-6"
    >
      <h1
        class="hero-heading text-4xl/tight sm:text-5xl/tight xl:text-6xl/tight font-bold text-heading-1"
      >
        <GradiantText>Trusted Engineering</GradiantText>
        Launch Fast. Scale Smart. Build Right.
      </h1>

      <div class="hero-para">
        <Paragraph>
          We design, build, and maintain reliable digital products for startups
          and growing businessesâ€”focused on performance, security, and clean
          architecture.
        </Paragraph>
      </div>

      <a href="/contact-us" aria-label="Start your project with Protize">
        <CtaButton>Get Started Today</CtaButton>
      </a>
    </div>

    <!-- Hero image -->
    <div
      class="relative lg:absolute lg:top-0 lg:right-0 w-full lg:w-[50%] z-0 rounded-3xl"
    >
      <div class="hero-visual">
        <Image
          src="/images/img.avif"
          alt="Hero image"
          width={2350}
          height={2359}
          class="hero-image w-full h-auto object-cover"
          loading="eager"
        />
      </div>
    </div>
  </Container>

  <Container className="mt-10 sm:mt-14 lg:mt-20">
    <CounterSection client:load />
  </Container>
</section>

<style>
  /* ===== entrance ===== */
  .hero-content {
    opacity: 0;
    transform: translateY(26px);
    animation: heroBlockIn 0.85s cubic-bezier(0.22, 1, 0.36, 1) 0.08s forwards;
  }

  .hero-heading,
  .hero-para,
  .hero-cta {
    opacity: 0;
    transform: translateY(18px);
  }

  .hero-heading {
    animation: fadeUp 0.75s cubic-bezier(0.22, 1, 0.36, 1) 0.2s forwards;
  }

  .hero-para {
    animation: fadeUp 0.72s cubic-bezier(0.22, 1, 0.36, 1) 0.36s forwards;
  }

  .hero-cta {
    animation: fadeUp 0.72s cubic-bezier(0.22, 1, 0.36, 1) 0.5s forwards;
  }

  .hero-visual {
    opacity: 0;
    transform: translateX(20px) scale(0.985);
    animation: heroImageIn 1s cubic-bezier(0.22, 1, 0.36, 1) 0.24s forwards;
    will-change: transform, opacity;
  }

  /* ===== image motion ===== */
  .hero-image {
    animation: floatY 5.5s ease-in-out 1.2s infinite;
    will-change: transform, filter;
    transition:
      transform 0.45s ease,
      filter 0.45s ease;
  }

  .hero-visual:hover .hero-image {
    transform: translateY(-2px) scale(1.015);
    filter: saturate(1.04);
  }

  /* ===== CTA micro interaction ===== */
  .hero-cta :global(a),
  .hero-cta :global(button) {
    position: relative;
    overflow: hidden;
    transition:
      transform 0.25s ease,
      box-shadow 0.25s ease,
      filter 0.25s ease;
  }

  .hero-cta :global(a:hover),
  .hero-cta :global(button:hover) {
    transform: translateY(-2px);
    filter: brightness(1.02);
  }

  .hero-cta :global(a::after),
  .hero-cta :global(button::after) {
    content: "";
    position: absolute;
    top: 0;
    left: -140%;
    width: 120%;
    height: 100%;
    background: linear-gradient(
      110deg,
      transparent 0%,
      rgba(255, 255, 255, 0.35) 45%,
      transparent 100%
    );
    transition: left 0.6s ease;
    pointer-events: none;
  }

  .hero-cta :global(a:hover::after),
  .hero-cta :global(button:hover::after) {
    left: 140%;
  }

  /* ===== keyframes ===== */
  @keyframes heroBlockIn {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes heroImageIn {
    to {
      opacity: 1;
      transform: translateX(0) scale(1);
    }
  }

  @keyframes fadeUp {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes floatY {
    0%,
    100% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(-10px);
    }
  }

  /* ===== reduced motion ===== */
  @media (prefers-reduced-motion: reduce) {
    .hero-content,
    .hero-heading,
    .hero-para,
    .hero-cta,
    .hero-visual,
    .hero-image {
      animation: none !important;
      opacity: 1 !important;
      transform: none !important;
    }

    .hero-image,
    .hero-cta :global(a),
    .hero-cta :global(button) {
      transition: none !important;
      filter: none !important;
    }

    .hero-cta :global(a::after),
    .hero-cta :global(button::after) {
      display: none !important;
    }
  }
</style>
